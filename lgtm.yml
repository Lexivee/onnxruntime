extraction:
  cpp:
    after_prepare:
      # Install cmake
      - mkdir -p $LGTM_WORKSPACE/custom_cmake
      - wget --quiet -O - "https://github.com/Kitware/CMake/releases/download/v3.20.1/cmake-3.20.1.tar.gz" | tar --strip-components=1 -xz -C $LGTM_WORKSPACE/custom_cmake
    index:
      build_command:
        - ./build.sh --config RelWithDebInfo --parallel --skip_tests --cmake_path $LGTM_WORKSPACE/custom_cmake/bin/cmake
  csharp:
    index:
      solution: ["csharp/OnnxRuntime.DesktopOnly.CSharp.sln"]

  java:
    after_prepare:
      # Install cmake
      - mkdir -p $LGTM_WORKSPACE/custom_cmake
      - wget --quiet -O - "https://github.com/Kitware/CMake/releases/download/v3.20.1/cmake-3.20.1.tar.gz" | tar --strip-components=1 -xz -C $LGTM_WORKSPACE/custom_cmake
    index:
      build_command:
      - ./build.sh --parallel --skip_tests --build_java --cmake_path $LGTM_WORKSPACE/custom_cmake/bin/cmake

queries:
  - include: "*"
